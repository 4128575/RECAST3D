



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.0.6">
    
    
      
        <title>Installing - RECAST3D</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.451f80e5.css">
      
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#installing-the-ci-cwi-live-reconstruction-software-stack" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="RECAST3D" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                RECAST3D
              </span>
              <span class="md-header-nav__topic">
                Installing
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/cicwi/RECAST3D/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      cicwi/RECAST3D
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href=".." title="RECAST3D" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    RECAST3D
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/cicwi/RECAST3D/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      cicwi/RECAST3D
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Installing
      </label>
    
    <a href="./" title="Installing" class="md-nav__link md-nav__link--active">
      Installing
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#detailed-installation-instructions" title="Detailed installation instructions" class="md-nav__link">
    Detailed installation instructions
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#0-optional-setting-up-a-fresh-conda-or-virtualenv-environment" title="0. (optional) Setting up a fresh Conda or VirtualEnv environment" class="md-nav__link">
    0. (optional) Setting up a fresh Conda or VirtualEnv environment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1-installing-recast3d" title="1. Installing RECAST3D" class="md-nav__link">
    1. Installing RECAST3D
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-installing-slicerecon" title="2. Installing SliceRecon" class="md-nav__link">
    2. Installing SliceRecon
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installing-the-slicerecon-python-bindings" title="Installing the SliceRecon Python bindings" class="md-nav__link">
    Installing the SliceRecon Python bindings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-the-installation" title="Testing the installation" class="md-nav__link">
    Testing the installation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-optional-installing-tomopackets" title="3. (optional) Installing TomoPackets" class="md-nav__link">
    3. (optional) Installing TomoPackets
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../user_guide/" title="User Guide" class="md-nav__link">
      User Guide
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../changelog/" title="Release Notes" class="md-nav__link">
      Release Notes
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#detailed-installation-instructions" title="Detailed installation instructions" class="md-nav__link">
    Detailed installation instructions
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#0-optional-setting-up-a-fresh-conda-or-virtualenv-environment" title="0. (optional) Setting up a fresh Conda or VirtualEnv environment" class="md-nav__link">
    0. (optional) Setting up a fresh Conda or VirtualEnv environment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1-installing-recast3d" title="1. Installing RECAST3D" class="md-nav__link">
    1. Installing RECAST3D
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-installing-slicerecon" title="2. Installing SliceRecon" class="md-nav__link">
    2. Installing SliceRecon
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installing-the-slicerecon-python-bindings" title="Installing the SliceRecon Python bindings" class="md-nav__link">
    Installing the SliceRecon Python bindings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-the-installation" title="Testing the installation" class="md-nav__link">
    Testing the installation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-optional-installing-tomopackets" title="3. (optional) Installing TomoPackets" class="md-nav__link">
    3. (optional) Installing TomoPackets
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/cicwi/RECAST3D/edit/master/docs/live_software_stack.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="installing-the-ci-cwi-live-reconstruction-software-stack">Installing the CI CWI live reconstruction software stack</h1>
<p>For realizing live reconstruction of tomographic scans, the CI CWI group
develops a set of libraries and software that can work together. The main
software are:</p>
<ul>
<li><em>RECAST3D</em>. The visualization software. This typically runs at a workstation,
  and is controlled by a user looking at live reconstructions of arbitrarily
  oriented slices.</li>
<li><em><a href="https://www.github.com/cicwi/SliceRecon">SliceRecon</a></em>. The reconstruction software library. This runs on a computer
  with a GPU (it can be the same as the workstation running RECAST3D). It
  receives the projection data, and performs slice reconstructions.</li>
<li><em><a href="https://www.github.com/cicwi/TomoPackets">TomoPackets</a></em>. The glue between the different components. This library
  defines a protocol for sending messages between scanners, reconstruction
  nodes, and visualization workstations.</li>
</ul>
<p>Depending on the data source, an <em>adapter</em> is needed that converts the
acquisition metadata and projection data into a common format defined by
TomoPackets, and that can be sent as input to SliceRecon.</p>
<p>Further reading:</p>
<ul>
<li><a href="https://cicwi.github.io/TomoPackets/overview.html#pipeline">TomoPackets#Pipeline</a>
  for an overview of the pipeline.</li>
<li><a href="https://cicwi.github.io/SliceRecon/usage.html">SliceRecon#Usage</a> see
  SliceRecon for examples of adapters.</li>
</ul>
<h2 id="detailed-installation-instructions">Detailed installation instructions</h2>
<p>For convenience, we will describe in detail how to install all the different
components of the live reconstruction software stack.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you have trouble following this guide, please first see the documentation
of each individual package for the most up-to-date installation instructions.
If that still does not help, <a href="https://github.com/cicwi/RECAST3D/issues">please let us know</a>!.</p>
</div>
<h3 id="0-optional-setting-up-a-fresh-conda-or-virtualenv-environment">0. (optional) Setting up a fresh <em>Conda</em> or <em>VirtualEnv</em> environment</h3>
<p>Although it is not strictly necessary to use any Python component, it is by far
the easiest way to extend and customize the software. We would suggest making a
new environment in which the Python bindings to our libraries are installed. For
example:</p>
<div class="codehilite"><pre><span></span>conda create -n live <span class="nv">python</span><span class="o">=</span><span class="m">3</span>.6
conda activate live
<span class="c1"># ... or `source activate live` for old conda versions</span>
</pre></div>


<p>if you choose to do this, make and activate the environment before following the
rest of these instructions.</p>
<h3 id="1-installing-recast3d">1. Installing RECAST3D</h3>
<p>First, we will install the RECAST3D visualization software. </p>
<div class="codehilite"><pre><span></span><span class="c1"># make a directory to store the packages</span>
mkdir projects/live_reconstruction
<span class="nb">cd</span> projects/live_reconstruction
<span class="c1"># clone the repository</span>
git clone https://github.com/cicwi/RECAST3D.git/
<span class="nb">cd</span> RECAST3D
</pre></div>


<p>Next, make sure you have GLM and the OpenGL development headers and libraries
installed. On Fedora, this would require the <code>glm-devel</code> and for example
<code>mesa-libGL-devel</code> packages. Optionally, preinstall the submodule dependencies
to speed up the build. If our build script cannot find these dependencies, it
will build them from source.</p>
<p>To build RECAST3D, run e.g.:</p>
<div class="codehilite"><pre><span></span>git submodule update --remote --init --recursive
mkdir build
<span class="nb">cd</span> build
cmake ..
make -j8
</pre></div>


<p>Finally, test if you can run RECAST3D:</p>
<div class="codehilite"><pre><span></span>./recast3d
</pre></div>


<p>if you run into any issues, <a href="https://github.com/cicwi/RECAST3D/issues">please let us know</a>!</p>
<h3 id="2-installing-slicerecon">2. Installing SliceRecon</h3>
<p>Next, we install SliceRecon.</p>
<div class="codehilite"><pre><span></span><span class="c1"># go back to the root directory:</span>
<span class="nb">cd</span> projects/live_reconstruction
<span class="c1"># clone the repository</span>
git clone https://github.com/cicwi/SliceRecon.git/
<span class="nb">cd</span> SliceRecon
</pre></div>


<p>Next, we need to install the dependencies.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The software requires a development version of the ASTRA toolbox,
that was not yet available publically on 2018-11-13. These changes are
intended to be released in ASTRA v1.9.</p>
</div>
<p>First, we have to install the <a href="http://www.astra-toolbox.com/">ASTRA toolbox</a>. We
need ASTRA with CUDA support, and install it in such a way so that <code>pkg-config</code>
is able to find the library. See the ASTRA documentation for details.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>On CI CWI workstations, you can use the module system: <code>module load libastra/git</code>.</p>
</div>
<p>Again, preinstalling the submodule dependencies will speed up the build.</p>
<div class="codehilite"><pre><span></span>git submodule update --remote --init --recursive
mkdir build
<span class="nb">cd</span> build
cmake ..
make -j8
</pre></div>


<h4 id="installing-the-slicerecon-python-bindings">Installing the SliceRecon Python bindings</h4>
<p>Next, we install the Python bindings. </p>
<div class="codehilite"><pre><span></span><span class="nb">cd</span> ../python/ <span class="c1"># relative to the build directory</span>
pip install -e .
</pre></div>


<h4 id="testing-the-installation">Testing the installation</h4>
<p>To test if the SliceRecon software is installed correctly, try the following steps.</p>
<ol>
<li>
<p><em>Start up a RECAST3D instance</em>. Change directories to the build folder of the
   RECAST3D directory we made before, and run:</p>
<div class="codehilite"><pre><span></span>./recast3d
</pre></div>


</li>
<li>
<p><em>Start up a SliceRecon server</em>, that connects to RECAST3D and listens for
   incoming (projection) data. Change directories to the build folder of the
   SliceRecon repository, and run:</p>
<div class="codehilite"><pre><span></span>./example/slicerecon_server --slice-size 512 --preview-size 256
</pre></div>


<p>Switching windows to the RECAST3D software, you should see a new scene with
   black slices.</p>
</li>
<li>
<p><em>Pushing data into SliceRecon</em>. The server is unable to reconstruct anything
   interesting, because it has received no data yet. To push some example data
   into SliceRecon, run the following (from the same folder as before):</p>
<div class="codehilite"><pre><span></span>./example/slicerecon_push_tomos --parallel This will send very poor
</pre></div>


<p>quality and low-resolution projection data of a Shepp&ndash;Logan phantom to the
   server, but you should be able to see some reconstructions in the RECAST3D
   software.</p>
</li>
</ol>
<h3 id="3-optional-installing-tomopackets">3. (optional) Installing TomoPackets</h3>
<p>When developing your own data adapter (or using an existing one), it is easiest
to use the Python bindings to the TomoPackets communication library. To install
it into your Python environment, run the following:</p>
<div class="codehilite"><pre><span></span><span class="c1"># go back to the root directory:</span>
<span class="nb">cd</span> projects/live_reconstruction
<span class="c1"># clone the repository</span>
git clone https://github.com/cicwi/TomoPackets.git/
<span class="nb">cd</span> TomoPackets
</pre></div>


<p>To install the library, simply run:</p>
<div class="codehilite"><pre><span></span>git submodule update --init --remote
pip install -e .
</pre></div>


<p>You can now develop and run TomoPackets data adapters.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href=".." title="Home" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Home
              </span>
            </div>
          </a>
        
        
          <a href="../user_guide/" title="User Guide" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                User Guide
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            RECAST3D is licensed under the <a href='https://github.com/cicwi/RECAST3D/blob/master/LICENSE.md'>GPL license</a>
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    <link rel="stylesheet" href="../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/jwbuurlage" class="md-footer-social__link fa fa-github-alt"></a>
    
      <a href="https://twitter.com/jwbuurlage" class="md-footer-social__link fa fa-twitter"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.5e60981f.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
    
      
    
  </body>
</html>